\documentclass[]{book}

\usepackage[utf8]{inputenc}
\usepackage{graphicx}
%\graphicspath{{./figures/}}
\usepackage[]{natbib}
%\usepackage{chapterbib}
%\bibliographystyle%
%  {wileynum}%for numerical citation and numerically listed entries in the bibliography
  %{wileyauy}%for author--year citation and alphabetical order in the bibliography
\usepackage{wileySTM}
\usepackage[\ifnum\pdfoutput=1breaklinks\fi]{hyperref}

\author{Kota Miura}\title{ImageJ Macro Language}

%%%%% additional BIAS headers %%%%%%

\usepackage{subfig}

%% Color definitions
\usepackage{color}
\definecolor{gray09}{rgb}{0.9,0.9,0.9}  %background for codes
\definecolor{red}{rgb}{1,0,0}
\definecolor{blue}{rgb}{0,0,1}
\definecolor{lightblue}{rgb}{0,0.8,1}
\definecolor{Dark}{gray}{.2}
\definecolor{Medium}{gray}{.6}
\definecolor{Light}{gray}{.8}
\definecolor{shadecolor}{rgb}{0.9, 0.9, 1}

%%%%%%%% Custom Environments %%%%%%%%

%% a block for excercies
\newenvironment{indentexercise}[1]%
{{\setlength{\leftmargin}{2em}}%
\textbf{Exercise \thesubsection-#1}%
\begin{list}{}% 
	\item%
}
{\end{list}}

%% Indenting for ImageJ commands in a single line. 
\newenvironment{indentFiji}%
{\begin{list}{}%
         {\setlength{\leftmargin}{1em}}%
         \item[]%
}
{\end{list}}

%% indenting for what ever command in a single line. 
\newenvironment{indentCom}%
{\begin{list}{}%
         {\setlength{\leftmargin}{1em}}%
         \item[]%
}
{\end{list}}

%%% command for imageJ menu tree, in-line
\newcommand{\ijmenu}[1]{\texttt{\small#1}}

%%% command for imageJ macro command , in-line
\newcommand{\ijmacro}[1]{\textbf{\small#1}}

%%% command for inline command
\newcommand{\ilcom}[1]{\texttt{\small#1}}

%%% a quick command for making tab space
 \newcommand{\tab}{\hspace*{3em}}

%%% a quick command for horizontal line. 
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}

%%%%%%%%  Source Code Matters %%%%%%%%

% packge for codes
\usepackage{listings}
%\usepackage{listingsutf8}
\lstset{ %
%language=Octave,                % could choose the language of the code, but we go for black and white, no syntax highlighting defined. 
%basicstyle=\footnotesize,       % the size of the fonts that are used for the code
basicstyle=\small\ttfamily, % same as above, but use typewriter
numbers=left,                   % where to put the line-numbers
numberstyle=\footnotesize,      % the size of the fonts that are used for the line-numbers
stepnumber=1,                   % the step between two line-numbers. If it's 1 each line 
                                % will be numbered
numbersep=5pt,                  % how far the line-numbers are from the code
backgroundcolor=\color{gray09},  % choose the background color. You must add \usepackage{color}
keywordstyle=\color{blue}, 	%added
showspaces=false,               % show spaces adding particular underscores
showstringspaces=false,         % underline spaces within strings
showtabs=false,                 % show tabs within strings adding particular underscores
%frame=single,                   % adds a frame around the code
%frame=trBL,
tabsize=2,                      % sets default tabsize to 2 spaces
captionpos=b,                   % sets the caption-position to bottom
breaklines=true,                % sets automatic line breaking
%breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
title=\lstname,                 % show the filename of files included with \lstinputlisting;
                                % also try caption instead of title
escapeinside={\%*}{*)},         % if you want to add a comment within your code
morekeywords={*,...},            % if you want to add more keywords to the set
morecomment=[l]{//},
morecomment=[s]{/*}{*/},
morestring=[b]",
%aboveskip={7.2pt}	%supposed to be the space above llisting but dows not work. 
%belowskip={7.2pt}
}

%%%%%%%% End of Custom Environments %%%%%%%%


%\includeonly{}

\begin{document}
%\frontmatter
%%\include{foreword}
%%\tableofcontents
%%\include{preface}
%\mainmatter
%Hello Wold!%only for testing -- please delete
%%\part{}
%%\include{c01}
%%\include{c02}
%%...
%%\appendix
%%\include{a01}
%\backmatter
%%\include{b01}
%%\printindex

%%%% The chapter numer should be the numbering of the project  %%%% 
\setcounter{chapter}{2}

%%%% Insert the file name of the content %%%% 
\chapter{ImageJ Macro Language}
\tableofcontents

\section{Aim: Why do we write ImageJ macro?}
  \input{sections/macroAims}
  
\section{Introduction}
  \input{sections/macroIntro}

\newpage

\section{Tools}
\label{sec:tools}
 \input{sections/bookonly/tools}

\newpage

\section{Basics}
\label{sec:ImageJMacroBasics}

  \input{sections/basics/macroBasics_HelloWorld}
  \input{sections/basics/macroBasics_VarStr}
  \input{sections/basics/macroBasics_MacroRecording}
\newpage

\include{sections/macroConditionsLoops}

\newpage

\section{Advanced Topics}
\label{sec:advancedTopics}

  \input{sections/adv/macroAdv_UserFunctions}
  \input{sections/adv/macroAdv_StringArrays}
  \input{sections/adv/macroAdv_NumArrays}
  \input{sections/adv/macroAdv_ArrayFunctions}
  \input{sections/adv/macroAdv_ArrayApplications}
  \input{sections/adv/macroAdv_StringControl}

\section{Acknowledgements}

  \input{acknowledgements}
  
\bibliographystyle{wileynum}

\newpage

\section{Appendix}

\input{sections/adv/appendix_arrayReturnFunctions}

%\section{Notes}
%\label{sec:notes}
%\input{sections/macroFinalNote}



\end{document}

